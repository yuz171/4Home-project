{"version":3,"sources":["../node_modules/antd-mobile/lib/button/style/css.js","../node_modules/antd-mobile/lib/button/index.js","pages/Profile/index.module.css","pages/Profile/index.js"],"names":["__webpack_require__","Object","defineProperty","exports","value","_extends3","_interopRequireDefault","_defineProperty3","_classCallCheck3","_createClass3","_possibleConstructorReturn3","_inherits3","_classnames3","React","obj","__esModule","newObj","key","prototype","hasOwnProperty","call","_interopRequireWildcard","_rmcFeedback2","_icon2","default","__rest","s","e","t","p","indexOf","getOwnPropertySymbols","i","length","rxTwoCNChar","isTwoCNChar","test","bind","isString","str","insertSpace","child","type","props","children","cloneElement","split","join","createElement","Button","_React$Component","this","__proto__","getPrototypeOf","apply","arguments","_classnames","_a","className","prefixCls","size","inline","disabled","icon","loading","activeStyle","activeClassName","onClick","restProps","iconType","wrapCls","kids","Children","map","iconEl","aria-hidden","rawCls","cls","undefined","role","aria-disabled","Component","defaultProps","module","title","bg","info","auth","user","myIcon","avatar","name","edit","arrow","ad","menuItem","menus","id","iconfont","to","DEFAULT_AVATAR","BASE_URL","alert","antd_mobile_lib_modal__WEBPACK_IMPORTED_MODULE_12___default","a","Profile","state","isLogin","isAuth","userInfo","nickname","logout","text","onPress","_onPress","E_react_project_hkzf_mobile_node_modules_babel_preset_react_app_node_modules_babel_runtime_helpers_esm_asyncToGenerator__WEBPACK_IMPORTED_MODULE_5__","E_react_project_hkzf_mobile_node_modules_babel_preset_react_app_node_modules_babel_runtime_regenerator__WEBPACK_IMPORTED_MODULE_4___default","mark","_callee","wrap","_context","prev","next","API","post","removeToken","_this","setState","stop","getUserInfo","get","res","data","status","_res$data$body","body","history","_this$state","_this$state$userInfo","react__WEBPACK_IMPORTED_MODULE_13___default","styles","root","src","alt","Fragment","antd_mobile_lib_button__WEBPACK_IMPORTED_MODULE_3___default","push","antd_mobile_lib_grid__WEBPACK_IMPORTED_MODULE_1___default","columnNum","hasLine","renderItem","item","react_router_dom__WEBPACK_IMPORTED_MODULE_14__","concat"],"mappings":"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","file":"static/js/18.63da6369.chunk.js","sourcesContent":["'use strict';\n\nrequire('../../style/css');\n\nrequire('../../icon/style/css');\n\nrequire('./index.css');","'use strict';\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\n\nvar _extends2 = require('babel-runtime/helpers/extends');\n\nvar _extends3 = _interopRequireDefault(_extends2);\n\nvar _defineProperty2 = require('babel-runtime/helpers/defineProperty');\n\nvar _defineProperty3 = _interopRequireDefault(_defineProperty2);\n\nvar _classCallCheck2 = require('babel-runtime/helpers/classCallCheck');\n\nvar _classCallCheck3 = _interopRequireDefault(_classCallCheck2);\n\nvar _createClass2 = require('babel-runtime/helpers/createClass');\n\nvar _createClass3 = _interopRequireDefault(_createClass2);\n\nvar _possibleConstructorReturn2 = require('babel-runtime/helpers/possibleConstructorReturn');\n\nvar _possibleConstructorReturn3 = _interopRequireDefault(_possibleConstructorReturn2);\n\nvar _inherits2 = require('babel-runtime/helpers/inherits');\n\nvar _inherits3 = _interopRequireDefault(_inherits2);\n\nvar _classnames2 = require('classnames');\n\nvar _classnames3 = _interopRequireDefault(_classnames2);\n\nvar _react = require('react');\n\nvar React = _interopRequireWildcard(_react);\n\nvar _rmcFeedback = require('rmc-feedback');\n\nvar _rmcFeedback2 = _interopRequireDefault(_rmcFeedback);\n\nvar _icon = require('../icon');\n\nvar _icon2 = _interopRequireDefault(_icon);\n\nfunction _interopRequireWildcard(obj) {\n  if (obj && obj.__esModule) {\n    return obj;\n  } else {\n    var newObj = {};\n\n    if (obj != null) {\n      for (var key in obj) {\n        if (Object.prototype.hasOwnProperty.call(obj, key)) newObj[key] = obj[key];\n      }\n    }\n\n    newObj['default'] = obj;\n    return newObj;\n  }\n}\n\nfunction _interopRequireDefault(obj) {\n  return obj && obj.__esModule ? obj : {\n    'default': obj\n  };\n}\n\nvar __rest = undefined && undefined.__rest || function (s, e) {\n  var t = {};\n\n  for (var p in s) {\n    if (Object.prototype.hasOwnProperty.call(s, p) && e.indexOf(p) < 0) t[p] = s[p];\n  }\n\n  if (s != null && typeof Object.getOwnPropertySymbols === \"function\") for (var i = 0, p = Object.getOwnPropertySymbols(s); i < p.length; i++) {\n    if (e.indexOf(p[i]) < 0) t[p[i]] = s[p[i]];\n  }\n  return t;\n};\n\nvar rxTwoCNChar = /^[\\u4e00-\\u9fa5]{2}$/;\nvar isTwoCNChar = rxTwoCNChar.test.bind(rxTwoCNChar);\n\nfunction isString(str) {\n  return typeof str === 'string';\n} // Insert one space between two chinese characters automatically.\n\n\nfunction insertSpace(child) {\n  if (isString(child.type) && isTwoCNChar(child.props.children)) {\n    return React.cloneElement(child, {}, child.props.children.split('').join(' '));\n  }\n\n  if (isString(child)) {\n    if (isTwoCNChar(child)) {\n      child = child.split('').join(' ');\n    }\n\n    return React.createElement('span', null, child);\n  }\n\n  return child;\n}\n\nvar Button = function (_React$Component) {\n  (0, _inherits3['default'])(Button, _React$Component);\n\n  function Button() {\n    (0, _classCallCheck3['default'])(this, Button);\n    return (0, _possibleConstructorReturn3['default'])(this, (Button.__proto__ || Object.getPrototypeOf(Button)).apply(this, arguments));\n  }\n\n  (0, _createClass3['default'])(Button, [{\n    key: 'render',\n    value: function render() {\n      var _classnames;\n\n      var _a = this.props,\n          children = _a.children,\n          className = _a.className,\n          prefixCls = _a.prefixCls,\n          type = _a.type,\n          size = _a.size,\n          inline = _a.inline,\n          disabled = _a.disabled,\n          icon = _a.icon,\n          loading = _a.loading,\n          activeStyle = _a.activeStyle,\n          activeClassName = _a.activeClassName,\n          onClick = _a.onClick,\n          restProps = __rest(_a, [\"children\", \"className\", \"prefixCls\", \"type\", \"size\", \"inline\", \"disabled\", \"icon\", \"loading\", \"activeStyle\", \"activeClassName\", \"onClick\"]);\n\n      var iconType = loading ? 'loading' : icon;\n      var wrapCls = (0, _classnames3['default'])(prefixCls, className, (_classnames = {}, (0, _defineProperty3['default'])(_classnames, prefixCls + '-primary', type === 'primary'), (0, _defineProperty3['default'])(_classnames, prefixCls + '-ghost', type === 'ghost'), (0, _defineProperty3['default'])(_classnames, prefixCls + '-warning', type === 'warning'), (0, _defineProperty3['default'])(_classnames, prefixCls + '-small', size === 'small'), (0, _defineProperty3['default'])(_classnames, prefixCls + '-inline', inline), (0, _defineProperty3['default'])(_classnames, prefixCls + '-disabled', disabled), (0, _defineProperty3['default'])(_classnames, prefixCls + '-loading', loading), (0, _defineProperty3['default'])(_classnames, prefixCls + '-icon', !!iconType), _classnames));\n      var kids = React.Children.map(children, insertSpace);\n      var iconEl = void 0;\n\n      if (typeof iconType === 'string') {\n        iconEl = React.createElement(_icon2['default'], {\n          'aria-hidden': 'true',\n          type: iconType,\n          size: size === 'small' ? 'xxs' : 'md',\n          className: prefixCls + '-icon'\n        });\n      } else if (iconType) {\n        var rawCls = iconType.props && iconType.props.className;\n        var cls = (0, _classnames3['default'])('am-icon', prefixCls + '-icon', size === 'small' ? 'am-icon-xxs' : 'am-icon-md');\n        iconEl = React.cloneElement(iconType, {\n          className: rawCls ? rawCls + ' ' + cls : cls\n        });\n      } // use div, button native is buggy @yiminghe\n\n\n      return React.createElement(_rmcFeedback2['default'] // tslint:disable-next-line:jsx-no-multiline-js\n      , {\n        activeClassName: activeClassName || (activeStyle ? prefixCls + '-active' : undefined),\n        disabled: disabled,\n        activeStyle: activeStyle\n      }, React.createElement('a', (0, _extends3['default'])({\n        role: 'button',\n        className: wrapCls\n      }, restProps, {\n        onClick: disabled ? undefined : onClick,\n        'aria-disabled': disabled\n      }), iconEl, kids));\n    }\n  }]);\n  return Button;\n}(React.Component);\n\nButton.defaultProps = {\n  prefixCls: 'am-button',\n  size: 'large',\n  inline: false,\n  disabled: false,\n  loading: false,\n  activeStyle: {}\n};\nexports['default'] = Button;\nmodule.exports = exports['default'];","// extracted by mini-css-extract-plugin\nmodule.exports = {\"title\":\"Profile_title__3S_TP\",\"bg\":\"Profile_bg__1Z_QQ\",\"info\":\"Profile_info__2T1rv\",\"auth\":\"Profile_auth__L3AKU\",\"user\":\"Profile_user__3xWHx\",\"myIcon\":\"Profile_myIcon__1GdDp\",\"avatar\":\"Profile_avatar__2nCid\",\"name\":\"Profile_name__94-md\",\"edit\":\"Profile_edit__2BEkO\",\"arrow\":\"Profile_arrow__17bUa\",\"ad\":\"Profile_ad__6F1Fu\",\"menuItem\":\"Profile_menuItem__2lQDT\"};","import React, { Component } from 'react'\r\n\r\nimport { Link } from 'react-router-dom'\r\nimport { Grid, Button, Modal } from 'antd-mobile'\r\n\r\nimport { BASE_URL, isAuth, removeToken, API } from '../../utils'\r\n\r\nimport styles from './index.module.css'\r\n\r\n// 菜单数据\r\nconst menus = [\r\n  { id: 1, name: '我的收藏', iconfont: 'icon-coll', to: '/favorate' },\r\n  { id: 2, name: '我的出租', iconfont: 'icon-ind', to: '/rent' },\r\n  { id: 3, name: '看房记录', iconfont: 'icon-record' },\r\n  {\r\n    id: 4,\r\n    name: '成为房主',\r\n    iconfont: 'icon-identity'\r\n  },\r\n  { id: 5, name: '个人资料', iconfont: 'icon-myinfo' },\r\n  { id: 6, name: '联系我们', iconfont: 'icon-cust' }\r\n]\r\n\r\n// 默认头像\r\nconst DEFAULT_AVATAR = BASE_URL + '/img/profile/avatar.png'\r\n\r\nconst alert = Modal.alert\r\n/* \r\n  1 给退出按钮绑定单击事件，创建方法 logout 作为事件处理程序。\r\n  2 导入 Modal 对话框组件（文档）。\r\n  3 在方法中，拷贝 Modal 组件文档中确认对话框的示例代码。\r\n  4 修改对话框的文字提示。\r\n  5 在退出按钮的事件处理程序中，先调用退出接口（让服务端退出），再移除本地token（本地退出）。\r\n  6 将登陆状态 isLogin 设置为 false。\r\n  7 清空用户状态对象。\r\n*/\r\n\r\nexport default class Profile extends Component {\r\n  state = {\r\n    // 是否登录\r\n    isLogin: isAuth(),\r\n    // 用户信息\r\n    userInfo: {\r\n      avatar: '',\r\n      nickname: ''\r\n    }\r\n  }\r\n\r\n  // 注意：不要忘了在进入页面时调用方法 ！\r\n  componentDidMount() {\r\n    this.getUserInfo()\r\n  }\r\n\r\n  // 退出\r\n  logout = () => {\r\n    alert('提示', '是否确定退出?', [\r\n      { text: '取消' },\r\n      {\r\n        text: '退出',\r\n        onPress: async () => {\r\n          // 调用退出接口\r\n          await API.post('/user/logout')\r\n\r\n          // 移除本地token\r\n          removeToken()\r\n\r\n          // 处理状态\r\n          this.setState({\r\n            isLogin: false,\r\n            userInfo: {\r\n              avatar: '',\r\n              nickname: ''\r\n            }\r\n          })\r\n        }\r\n      }\r\n    ])\r\n  }\r\n\r\n  async getUserInfo() {\r\n    if (!this.state.isLogin) {\r\n      // 未登录\r\n      return\r\n    }\r\n\r\n    // 发送请求，获取个人资料\r\n    const res = await API.get('/user')\r\n\r\n    // console.log(res)\r\n    if (res.data.status === 200) {\r\n      const { avatar, nickname } = res.data.body\r\n      this.setState({\r\n        userInfo: {\r\n          avatar: BASE_URL + avatar,\r\n          nickname\r\n        }\r\n      })\r\n    } else {\r\n      // token 失效的情况，这种情况下， 应该将 isLogin 设置为 false\r\n      this.setState({\r\n        isLogin: false\r\n      })\r\n    }\r\n  }\r\n\r\n  render() {\r\n    const { history } = this.props\r\n\r\n    const {\r\n      isLogin,\r\n      userInfo: { avatar, nickname }\r\n    } = this.state\r\n\r\n    return (\r\n      <div className={styles.root}>\r\n        {/* 个人信息 */}\r\n        <div className={styles.title}>\r\n          <img\r\n            className={styles.bg}\r\n            src={BASE_URL + '/img/profile/bg.png'}\r\n            alt=\"背景图\"\r\n          />\r\n          <div className={styles.info}>\r\n            <div className={styles.myIcon}>\r\n              <img\r\n                className={styles.avatar}\r\n                src={avatar || DEFAULT_AVATAR}\r\n                alt=\"icon\"\r\n              />\r\n            </div>\r\n            <div className={styles.user}>\r\n              <div className={styles.name}>{nickname || '游客'}</div>\r\n              {/* 登录后展示： */}\r\n              {isLogin ? (\r\n                <>\r\n                  <div className={styles.auth}>\r\n                    <span onClick={this.logout}>退出</span>\r\n                  </div>\r\n                  <div className={styles.edit}>\r\n                    编辑个人资料\r\n                    <span className={styles.arrow}>\r\n                      <i className=\"iconfont icon-arrow\" />\r\n                    </span>\r\n                  </div>\r\n                </>\r\n              ) : (\r\n                <div className={styles.edit}>\r\n                  <Button\r\n                    type=\"primary\"\r\n                    size=\"small\"\r\n                    inline\r\n                    onClick={() => history.push('/login')}\r\n                  >\r\n                    去登录\r\n                  </Button>\r\n                </div>\r\n              )}\r\n\r\n              {/* 未登录展示： */}\r\n            </div>\r\n          </div>\r\n        </div>\r\n\r\n        {/* 九宫格菜单 */}\r\n        <Grid\r\n          data={menus}\r\n          columnNum={3}\r\n          hasLine={false}\r\n          renderItem={item =>\r\n            item.to ? (\r\n              <Link to={item.to}>\r\n                <div className={styles.menuItem}>\r\n                  <i className={`iconfont ${item.iconfont}`} />\r\n                  <span>{item.name}</span>\r\n                </div>\r\n              </Link>\r\n            ) : (\r\n              <div className={styles.menuItem}>\r\n                <i className={`iconfont ${item.iconfont}`} />\r\n                <span>{item.name}</span>\r\n              </div>\r\n            )\r\n          }\r\n        />\r\n\r\n        {/* 加入我们 */}\r\n        <div className={styles.ad}>\r\n          <img src={BASE_URL + '/img/profile/join.png'} alt=\"\" />\r\n        </div>\r\n      </div>\r\n    )\r\n  }\r\n}\r\n"],"sourceRoot":""}