{"version":3,"sources":["components/NavHeader/index.js","../node_modules/antd-mobile/lib/nav-bar/style/css.js","../node_modules/antd-mobile/lib/nav-bar/index.js","components/NavHeader/index.module.css","pages/CityList/index.js"],"names":["withRouter","_ref","children","history","onLeftClick","className","rightContent","react__WEBPACK_IMPORTED_MODULE_2___default","a","createElement","antd_mobile_lib_nav_bar__WEBPACK_IMPORTED_MODULE_1___default","styles","navBar","join","mode","icon","go","__webpack_require__","Object","defineProperty","exports","value","_extends3","_interopRequireDefault","_classCallCheck3","_createClass3","_possibleConstructorReturn3","_inherits3","_classnames2","React","obj","__esModule","newObj","key","prototype","hasOwnProperty","call","_interopRequireWildcard","default","__rest","s","e","t","p","indexOf","getOwnPropertySymbols","i","length","NavBar","_React$Component","this","__proto__","getPrototypeOf","apply","arguments","_a","props","prefixCls","leftContent","restProps","role","onClick","aria-hidden","Component","defaultProps","module","formatCityData","list","cityList","forEach","item","first","short","substr","push","cityIndex","keys","sort","TITLE_HEIGHT","NAME_HEIGHT","formatCityIndex","letter","toUpperCase","HOUSE_CITY","CityList","_this","E_react_project_hkzf_mobile_node_modules_babel_preset_react_app_node_modules_babel_runtime_helpers_esm_classCallCheck__WEBPACK_IMPORTED_MODULE_4__","E_react_project_hkzf_mobile_node_modules_babel_preset_react_app_node_modules_babel_runtime_helpers_esm_possibleConstructorReturn__WEBPACK_IMPORTED_MODULE_6__","E_react_project_hkzf_mobile_node_modules_babel_preset_react_app_node_modules_babel_runtime_helpers_esm_getPrototypeOf__WEBPACK_IMPORTED_MODULE_7__","rowRenderer","index","style","isScrolling","isVisible","_this$state","state","react__WEBPACK_IMPORTED_MODULE_9___default","map","changeCity","label","getRowHeight","_ref2","_this$state2","onRowsRendered","_ref3","startIndex","activeIndex","setState","cityListComponent","createRef","getCityList","current","measureAllRows","axios","get","res","data","body","hotRes","unshift","getCurrentCity","curCity","_ref4","localStorage","setItem","JSON","stringify","antd_mobile_lib_toast__WEBPACK_IMPORTED_MODULE_1___default","info","_this2","_this$state3","scrollToRow","_this3","_components_NavHeader__WEBPACK_IMPORTED_MODULE_13__","react_virtualized__WEBPACK_IMPORTED_MODULE_11__","_ref5","width","height","ref","rowCount","rowHeight","scrollToAlignment","renderCityIndex"],"mappings":"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","file":"static/js/15.7976b6a3.chunk.js","sourcesContent":["import React from 'react'\r\n\r\nimport { NavBar } from 'antd-mobile'\r\n\r\n// 导入 withRouter 高阶组件\r\nimport { withRouter } from 'react-router-dom'\r\n\r\n// 导入 props 校验的包\r\nimport PropTypes from 'prop-types'\r\n\r\n// 导入样式\r\n// import './index.scss'\r\nimport styles from './index.module.css'\r\n\r\n// 添加 className 和 rightContent（导航栏右侧内容） 属性\r\nfunction NavHeader({\r\n  children,\r\n  history,\r\n  onLeftClick,\r\n  className,\r\n  rightContent\r\n}) {\r\n  // 默认点击行为\r\n  const defaultHandler = () => history.go(-1)\r\n\r\n  return (\r\n    <NavBar\r\n      className={[styles.navBar, className || ''].join(' ')}\r\n      mode=\"light\"\r\n      icon={<i className=\"iconfont icon-back\" />}\r\n      onLeftClick={onLeftClick || defaultHandler}\r\n      rightContent={rightContent}\r\n    >\r\n      {children}\r\n    </NavBar>\r\n  )\r\n}\r\n\r\n// 添加props校验\r\nNavHeader.propTypes = {\r\n  children: PropTypes.string.isRequired,\r\n  onLeftClick: PropTypes.func,\r\n  className: PropTypes.string,\r\n  rightContent: PropTypes.array\r\n}\r\n\r\n// withRouter(NavHeader) 函数的返回值也是一个组件\r\nexport default withRouter(NavHeader)\r\n","'use strict';\n\nrequire('../../style/css');\n\nrequire('./index.css');","'use strict';\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\n\nvar _extends2 = require('babel-runtime/helpers/extends');\n\nvar _extends3 = _interopRequireDefault(_extends2);\n\nvar _classCallCheck2 = require('babel-runtime/helpers/classCallCheck');\n\nvar _classCallCheck3 = _interopRequireDefault(_classCallCheck2);\n\nvar _createClass2 = require('babel-runtime/helpers/createClass');\n\nvar _createClass3 = _interopRequireDefault(_createClass2);\n\nvar _possibleConstructorReturn2 = require('babel-runtime/helpers/possibleConstructorReturn');\n\nvar _possibleConstructorReturn3 = _interopRequireDefault(_possibleConstructorReturn2);\n\nvar _inherits2 = require('babel-runtime/helpers/inherits');\n\nvar _inherits3 = _interopRequireDefault(_inherits2);\n\nvar _classnames = require('classnames');\n\nvar _classnames2 = _interopRequireDefault(_classnames);\n\nvar _react = require('react');\n\nvar React = _interopRequireWildcard(_react);\n\nfunction _interopRequireWildcard(obj) {\n  if (obj && obj.__esModule) {\n    return obj;\n  } else {\n    var newObj = {};\n\n    if (obj != null) {\n      for (var key in obj) {\n        if (Object.prototype.hasOwnProperty.call(obj, key)) newObj[key] = obj[key];\n      }\n    }\n\n    newObj['default'] = obj;\n    return newObj;\n  }\n}\n\nfunction _interopRequireDefault(obj) {\n  return obj && obj.__esModule ? obj : {\n    'default': obj\n  };\n}\n\nvar __rest = undefined && undefined.__rest || function (s, e) {\n  var t = {};\n\n  for (var p in s) {\n    if (Object.prototype.hasOwnProperty.call(s, p) && e.indexOf(p) < 0) t[p] = s[p];\n  }\n\n  if (s != null && typeof Object.getOwnPropertySymbols === \"function\") for (var i = 0, p = Object.getOwnPropertySymbols(s); i < p.length; i++) {\n    if (e.indexOf(p[i]) < 0) t[p[i]] = s[p[i]];\n  }\n  return t;\n};\n\nvar NavBar = function (_React$Component) {\n  (0, _inherits3['default'])(NavBar, _React$Component);\n\n  function NavBar() {\n    (0, _classCallCheck3['default'])(this, NavBar);\n    return (0, _possibleConstructorReturn3['default'])(this, (NavBar.__proto__ || Object.getPrototypeOf(NavBar)).apply(this, arguments));\n  }\n\n  (0, _createClass3['default'])(NavBar, [{\n    key: 'render',\n    value: function render() {\n      var _a = this.props,\n          prefixCls = _a.prefixCls,\n          className = _a.className,\n          children = _a.children,\n          mode = _a.mode,\n          icon = _a.icon,\n          onLeftClick = _a.onLeftClick,\n          leftContent = _a.leftContent,\n          rightContent = _a.rightContent,\n          restProps = __rest(_a, [\"prefixCls\", \"className\", \"children\", \"mode\", \"icon\", \"onLeftClick\", \"leftContent\", \"rightContent\"]);\n\n      return React.createElement('div', (0, _extends3['default'])({}, restProps, {\n        className: (0, _classnames2['default'])(className, prefixCls, prefixCls + '-' + mode)\n      }), React.createElement('div', {\n        className: prefixCls + '-left',\n        role: 'button',\n        onClick: onLeftClick\n      }, icon ? // tslint:disable-next-line:jsx-no-multiline-js\n      React.createElement('span', {\n        className: prefixCls + '-left-icon',\n        'aria-hidden': 'true'\n      }, icon) : null, leftContent), React.createElement('div', {\n        className: prefixCls + '-title'\n      }, children), React.createElement('div', {\n        className: prefixCls + '-right'\n      }, rightContent));\n    }\n  }]);\n  return NavBar;\n}(React.Component);\n\nexports['default'] = NavBar;\nNavBar.defaultProps = {\n  prefixCls: 'am-navbar',\n  mode: 'dark',\n  onLeftClick: function onLeftClick() {}\n};\nmodule.exports = exports['default'];","// extracted by mini-css-extract-plugin\nmodule.exports = {\"navBar\":\"NavHeader_navBar__3a5BZ\"};","import React from 'react'\r\n\r\nimport axios from 'axios'\r\nimport { Toast } from 'antd-mobile'\r\n\r\n// 导入 List 组件\r\nimport { List, AutoSizer } from 'react-virtualized'\r\n\r\n// 导入 utils 中获取当前定位城市的方法\r\nimport { getCurrentCity } from '../../utils'\r\n\r\n// 导入 NavHeader 组件\r\nimport NavHeader from '../../components/NavHeader'\r\n\r\nimport './index.scss'\r\n\r\n// 导入 CSSModules 的样式文件\r\n// import styles from './index.module.css'\r\n// console.log(styles)\r\n\r\n// 数据格式化的方法\r\n// list: [{}, {}]\r\nconst formatCityData = list => {\r\n  const cityList = {}\r\n  // const cityIndex = []\r\n\r\n  // 1 遍历list数组\r\n  list.forEach(item => {\r\n    // 2 获取每一个城市的首字母\r\n    const first = item.short.substr(0, 1)\r\n    // 3 判断 cityList 中是否有该分类\r\n    if (cityList[first]) {\r\n      // 4 如果有，直接往该分类中push数据\r\n      // cityList[first] => [{}, {}]\r\n      cityList[first].push(item)\r\n    } else {\r\n      // 5 如果没有，就先创建一个数组，然后，把当前城市信息添加到数组中\r\n      cityList[first] = [item]\r\n    }\r\n  })\r\n\r\n  // 获取索引数据\r\n  const cityIndex = Object.keys(cityList).sort()\r\n\r\n  return {\r\n    cityList,\r\n    cityIndex\r\n  }\r\n}\r\n\r\n// 索引（A、B等）的高度\r\nconst TITLE_HEIGHT = 36\r\n// 每个城市名称的高度\r\nconst NAME_HEIGHT = 50\r\n\r\n// 封装处理字母索引的方法\r\nconst formatCityIndex = letter => {\r\n  switch (letter) {\r\n    case '#':\r\n      return '当前定位'\r\n    case 'hot':\r\n      return '热门城市'\r\n    default:\r\n      return letter.toUpperCase()\r\n  }\r\n}\r\n\r\n// 有房源的城市\r\nconst HOUSE_CITY = ['北京', '上海', '广州', '深圳']\r\n\r\nexport default class CityList extends React.Component {\r\n  constructor(props) {\r\n    super(props)\r\n\r\n    this.state = {\r\n      cityList: {},\r\n      cityIndex: [],\r\n      // 指定右侧字母索引列表高亮的索引号\r\n      activeIndex: 0\r\n    }\r\n\r\n    // 创建ref对象\r\n    this.cityListComponent = React.createRef()\r\n  }\r\n\r\n  async componentDidMount() {\r\n    await this.getCityList()\r\n\r\n    // 调用 measureAllRows，提前计算 List 中每一行的高度，实现 scrollToRow 的精确跳转\r\n    this.cityListComponent.current.measureAllRows()\r\n  }\r\n\r\n  // 获取城市列表数据的方法\r\n  async getCityList() {\r\n    const res = await axios.get('http://localhost:8080/area/city?level=1')\r\n    const { cityList, cityIndex } = formatCityData(res.data.body)\r\n\r\n    // 获取热门城市数据\r\n    const hotRes = await axios.get('http://localhost:8080/area/hot')\r\n    cityList['hot'] = hotRes.data.body\r\n    cityIndex.unshift('hot')\r\n\r\n    // 获取当前定位城市\r\n    const curCity = await getCurrentCity()\r\n    cityList['#'] = [curCity]\r\n    cityIndex.unshift('#')\r\n\r\n    // console.log(cityList, cityIndex, curCity)\r\n    this.setState({\r\n      cityList,\r\n      cityIndex\r\n    })\r\n  }\r\n\r\n  changeCity({ label, value }) {\r\n    if (HOUSE_CITY.indexOf(label) > -1) {\r\n      // 有\r\n      localStorage.setItem('hkzf_city', JSON.stringify({ label, value }))\r\n      this.props.history.go(-1)\r\n    } else {\r\n      Toast.info('该城市暂无房源数据', 1, null, false)\r\n    }\r\n  }\r\n\r\n  // List组件渲染每一行的方法：\r\n  rowRenderer = ({\r\n    key, // Unique key within array of rows\r\n    index, // 索引号\r\n    isScrolling, // 当前项是否正在滚动中\r\n    isVisible, // 当前项在 List 中是可见的\r\n    style // 注意：重点属性，一定要给每一个行数据添加该样式！作用：指定每一行的位置\r\n  }) => {\r\n    // 获取每一行的字母索引\r\n    const { cityIndex, cityList } = this.state\r\n    const letter = cityIndex[index]\r\n\r\n    // 获取指定字母索引下的城市列表数据\r\n    // console.log(cityList[letter])\r\n\r\n    return (\r\n      <div key={key} style={style} className=\"city\">\r\n        <div className=\"title\">{formatCityIndex(letter)}</div>\r\n        {cityList[letter].map(item => (\r\n          <div\r\n            className=\"name\"\r\n            key={item.value}\r\n            onClick={() => this.changeCity(item)}\r\n          >\r\n            {item.label}\r\n          </div>\r\n        ))}\r\n      </div>\r\n    )\r\n  }\r\n\r\n  // 创建动态计算每一行高度的方法\r\n  getRowHeight = ({ index }) => {\r\n    // 索引标题高度 + 城市数量 * 城市名称的高度\r\n    // TITLE_HEIGHT + cityList[cityIndex[index]].length * NAME_HEIGHT\r\n    const { cityList, cityIndex } = this.state\r\n    return TITLE_HEIGHT + cityList[cityIndex[index]].length * NAME_HEIGHT\r\n  }\r\n\r\n  // 封装渲染右侧索引列表的方法\r\n  renderCityIndex() {\r\n    // 获取到 cityIndex，并遍历其，实现渲染\r\n    const { cityIndex, activeIndex } = this.state\r\n    return cityIndex.map((item, index) => (\r\n      <li\r\n        className=\"city-index-item\"\r\n        key={item}\r\n        onClick={() => {\r\n          // console.log('当前索引号：', index)\r\n          this.cityListComponent.current.scrollToRow(index)\r\n        }}\r\n      >\r\n        <span className={activeIndex === index ? 'index-active' : ''}>\r\n          {item === 'hot' ? '热' : item.toUpperCase()}\r\n        </span>\r\n      </li>\r\n    ))\r\n  }\r\n\r\n  // 用于获取List组件中渲染行的信息\r\n  onRowsRendered = ({ startIndex }) => {\r\n    // console.log('startIndex：', startIndex)\r\n    if (this.state.activeIndex !== startIndex) {\r\n      this.setState({\r\n        activeIndex: startIndex\r\n      })\r\n    }\r\n  }\r\n\r\n  render() {\r\n    return (\r\n      <div className=\"citylist\">\r\n        {/* 顶部导航栏 */}\r\n        <NavHeader>城市选择</NavHeader>\r\n\r\n        {/* 城市列表 */}\r\n        <AutoSizer>\r\n          {({ width, height }) => (\r\n            <List\r\n              ref={this.cityListComponent}\r\n              width={width}\r\n              height={height}\r\n              rowCount={this.state.cityIndex.length}\r\n              rowHeight={this.getRowHeight}\r\n              rowRenderer={this.rowRenderer}\r\n              onRowsRendered={this.onRowsRendered}\r\n              scrollToAlignment=\"start\"\r\n            />\r\n          )}\r\n        </AutoSizer>\r\n\r\n        {/* 右侧索引列表 */}\r\n        <ul className=\"city-index\">{this.renderCityIndex()}</ul>\r\n      </div>\r\n    )\r\n  }\r\n}\r\n"],"sourceRoot":""}