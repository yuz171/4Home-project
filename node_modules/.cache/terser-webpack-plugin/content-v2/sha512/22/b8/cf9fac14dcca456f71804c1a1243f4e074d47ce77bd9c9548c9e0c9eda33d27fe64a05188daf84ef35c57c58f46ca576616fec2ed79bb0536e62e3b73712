{"map":"{\"version\":3,\"sources\":[\"E:\\\\react-project\\\\hkzf-mobile\\\\src\\\\components\\\\NavHeader\\\\index.js\",\"E:\\\\react-project\\\\hkzf-mobile\\\\node_modules\\\\mini-css-extract-plugin\\\\dist\\\\loader.js??ref--6-oneOf-4-0!E:\\\\react-project\\\\hkzf-mobile\\\\node_modules\\\\css-loader\\\\dist\\\\cjs.js??ref--6-oneOf-4-1!E:\\\\react-project\\\\hkzf-mobile\\\\node_modules\\\\postcss-loader\\\\src\\\\index.js??postcss!E:\\\\react-project\\\\hkzf-mobile\\\\src\\\\components\\\\NavHeader\\\\index.module.css\",\"E:\\\\react-project\\\\hkzf-mobile\\\\node_modules\\\\mini-css-extract-plugin\\\\dist\\\\loader.js??ref--6-oneOf-4-0!E:\\\\react-project\\\\hkzf-mobile\\\\node_modules\\\\css-loader\\\\dist\\\\cjs.js??ref--6-oneOf-4-1!E:\\\\react-project\\\\hkzf-mobile\\\\node_modules\\\\postcss-loader\\\\src\\\\index.js??postcss!E:\\\\react-project\\\\hkzf-mobile\\\\src\\\\pages\\\\Login\\\\index.module.css\",\"E:\\\\react-project\\\\hkzf-mobile\\\\src\\\\pages\\\\Login\\\\index.js\"],\"names\":[\"withRouter\",\"_ref\",\"children\",\"history\",\"onLeftClick\",\"className\",\"rightContent\",\"react__WEBPACK_IMPORTED_MODULE_2___default\",\"a\",\"createElement\",\"antd_mobile_lib_nav_bar__WEBPACK_IMPORTED_MODULE_1___default\",\"styles\",\"navBar\",\"join\",\"mode\",\"icon\",\"go\",\"module\",\"exports\",\"root\",\"navHeader\",\"backHome\",\"formItem\",\"input\",\"formSubmit\",\"submit\",\"error\",\"Login\",\"react__WEBPACK_IMPORTED_MODULE_15___default\",\"_components_NavHeader__WEBPACK_IMPORTED_MODULE_20__\",\"antd_mobile_lib_white_space__WEBPACK_IMPORTED_MODULE_9___default\",\"size\",\"antd_mobile_lib_wing_blank__WEBPACK_IMPORTED_MODULE_5___default\",\"formik__WEBPACK_IMPORTED_MODULE_17__\",\"name\",\"placeholder\",\"component\",\"type\",\"antd_mobile_lib_flex__WEBPACK_IMPORTED_MODULE_7___default\",\"Item\",\"react_router_dom__WEBPACK_IMPORTED_MODULE_16__\",\"to\",\"Component\",\"withFormik\",\"mapPropsToValues\",\"username\",\"password\",\"validationSchema\",\"Yup\",\"shape\",\"required\",\"matches\",\"handleSubmit\",\"_handleSubmit\",\"Object\",\"E_react_project_hkzf_mobile_node_modules_babel_preset_react_app_node_modules_babel_runtime_helpers_esm_asyncToGenerator__WEBPACK_IMPORTED_MODULE_3__\",\"E_react_project_hkzf_mobile_node_modules_babel_preset_react_app_node_modules_babel_runtime_regenerator__WEBPACK_IMPORTED_MODULE_0___default\",\"mark\",\"_callee\",\"values\",\"props\",\"res\",\"_res$data\",\"status\",\"body\",\"description\",\"wrap\",\"_context\",\"prev\",\"next\",\"API\",\"post\",\"sent\",\"data\",\"localStorage\",\"setItem\",\"token\",\"location\",\"state\",\"replace\",\"from\",\"pathname\",\"antd_mobile_lib_toast__WEBPACK_IMPORTED_MODULE_2___default\",\"info\",\"stop\",\"_x\",\"_x2\",\"apply\",\"this\",\"arguments\"],\"mappings\":\"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\",\"sourcesContent\":[\"import React from 'react'\\r\\n\\r\\nimport { NavBar } from 'antd-mobile'\\r\\n\\r\\n// 导入 withRouter 高阶组件\\r\\nimport { withRouter } from 'react-router-dom'\\r\\n\\r\\n// 导入 props 校验的包\\r\\nimport PropTypes from 'prop-types'\\r\\n\\r\\n// 导入样式\\r\\n// import './index.scss'\\r\\nimport styles from './index.module.css'\\r\\n\\r\\n// 添加 className 和 rightContent（导航栏右侧内容） 属性\\r\\nfunction NavHeader({\\r\\n  children,\\r\\n  history,\\r\\n  onLeftClick,\\r\\n  className,\\r\\n  rightContent\\r\\n}) {\\r\\n  // 默认点击行为\\r\\n  const defaultHandler = () => history.go(-1)\\r\\n\\r\\n  return (\\r\\n    <NavBar\\r\\n      className={[styles.navBar, className || ''].join(' ')}\\r\\n      mode=\\\"light\\\"\\r\\n      icon={<i className=\\\"iconfont icon-back\\\" />}\\r\\n      onLeftClick={onLeftClick || defaultHandler}\\r\\n      rightContent={rightContent}\\r\\n    >\\r\\n      {children}\\r\\n    </NavBar>\\r\\n  )\\r\\n}\\r\\n\\r\\n// 添加props校验\\r\\nNavHeader.propTypes = {\\r\\n  children: PropTypes.string.isRequired,\\r\\n  onLeftClick: PropTypes.func,\\r\\n  className: PropTypes.string,\\r\\n  rightContent: PropTypes.array\\r\\n}\\r\\n\\r\\n// withRouter(NavHeader) 函数的返回值也是一个组件\\r\\nexport default withRouter(NavHeader)\\r\\n\",\"// extracted by mini-css-extract-plugin\\nmodule.exports = {\\\"navBar\\\":\\\"NavHeader_navBar__3a5BZ\\\"};\",\"// extracted by mini-css-extract-plugin\\nmodule.exports = {\\\"root\\\":\\\"Login_root__1AMB0\\\",\\\"navHeader\\\":\\\"Login_navHeader__1D_lV\\\",\\\"backHome\\\":\\\"Login_backHome__10ref\\\",\\\"formItem\\\":\\\"Login_formItem__Mf5HJ\\\",\\\"input\\\":\\\"Login_input__3h38e\\\",\\\"formSubmit\\\":\\\"Login_formSubmit__25HhB\\\",\\\"submit\\\":\\\"Login_submit__2PkzZ\\\",\\\"error\\\":\\\"Login_error__5Xdzk\\\"};\",\"import React, { Component } from 'react'\\r\\nimport { Flex, WingBlank, WhiteSpace, Toast } from 'antd-mobile'\\r\\n\\r\\nimport { Link } from 'react-router-dom'\\r\\n\\r\\n// 导入withFormik\\r\\nimport { withFormik, Form, Field, ErrorMessage } from 'formik'\\r\\n\\r\\n// 导入Yup\\r\\nimport * as Yup from 'yup'\\r\\n\\r\\n// 导入 API\\r\\nimport { API } from '../../utils'\\r\\n\\r\\nimport NavHeader from '../../components/NavHeader'\\r\\n\\r\\nimport styles from './index.module.css'\\r\\n\\r\\n// 验证规则：\\r\\nconst REG_UNAME = /^[a-zA-Z_\\\\d]{5,8}$/\\r\\nconst REG_PWD = /^[a-zA-Z_\\\\d]{5,12}$/\\r\\n\\r\\n/* \\r\\n  简化表单处理：\\r\\n\\r\\n  1 导入 Form 组件，替换 form 元素，去掉 onSubmit。\\r\\n  2 导入 Field 组件，替换 input 表单元素，去掉 onChange、onBlur、value。\\r\\n  3 导入 ErrorMessage 组件，原来的错误消息逻辑代码。\\r\\n  4 去掉所有 props。\\r\\n*/\\r\\n\\r\\nclass Login extends Component {\\r\\n  render() {\\r\\n    return (\\r\\n      <div className={styles.root}>\\r\\n        {/* 顶部导航 */}\\r\\n        <NavHeader className={styles.navHeader}>账号登录</NavHeader>\\r\\n        <WhiteSpace size=\\\"xl\\\" />\\r\\n\\r\\n        {/* 登录表单 */}\\r\\n        <WingBlank>\\r\\n          <Form>\\r\\n            {/* 账号 */}\\r\\n            <div className={styles.formItem}>\\r\\n              <Field\\r\\n                className={styles.input}\\r\\n                name=\\\"username\\\"\\r\\n                placeholder=\\\"请输入账号\\\"\\r\\n              />\\r\\n            </div>\\r\\n            <ErrorMessage\\r\\n              className={styles.error}\\r\\n              name=\\\"username\\\"\\r\\n              component=\\\"div\\\"\\r\\n            />\\r\\n            {/* 密码 */}\\r\\n            <div className={styles.formItem}>\\r\\n              <Field\\r\\n                className={styles.input}\\r\\n                name=\\\"password\\\"\\r\\n                type=\\\"password\\\"\\r\\n                placeholder=\\\"请输入密码\\\"\\r\\n              />\\r\\n            </div>\\r\\n            <ErrorMessage\\r\\n              className={styles.error}\\r\\n              name=\\\"password\\\"\\r\\n              component=\\\"div\\\"\\r\\n            />\\r\\n            <div className={styles.formSubmit}>\\r\\n              <button className={styles.submit} type=\\\"submit\\\">\\r\\n                登 录\\r\\n              </button>\\r\\n            </div>\\r\\n          </Form>\\r\\n          <Flex className={styles.backHome}>\\r\\n            <Flex.Item>\\r\\n              <Link to=\\\"/registe\\\">还没有账号，去注册~</Link>\\r\\n            </Flex.Item>\\r\\n          </Flex>\\r\\n        </WingBlank>\\r\\n      </div>\\r\\n    )\\r\\n  }\\r\\n}\\r\\n\\r\\n// 使用 withFormik 高阶组件包装 Login 组件，为 Login 组件提供属性和方法\\r\\nLogin = withFormik({\\r\\n  // 提供状态：\\r\\n  mapPropsToValues: () => ({ username: '', password: '' }),\\r\\n\\r\\n  // 添加表单校验规则\\r\\n  validationSchema: Yup.object().shape({\\r\\n    username: Yup.string()\\r\\n      .required('账号为必填项')\\r\\n      .matches(REG_UNAME, '长度为5到8位，只能出现数字、字母、下划线'),\\r\\n    password: Yup.string()\\r\\n      .required('密码为必填项')\\r\\n      .matches(REG_PWD, '长度为5到12位，只能出现数字、字母、下划线')\\r\\n  }),\\r\\n\\r\\n  // 表单的提交事件\\r\\n  handleSubmit: async (values, { props }) => {\\r\\n    // 获取账号和密码\\r\\n    const { username, password } = values\\r\\n\\r\\n    // console.log('表单提交了', username, password)\\r\\n    // 发送请求\\r\\n    const res = await API.post('/user/login', {\\r\\n      username,\\r\\n      password\\r\\n    })\\r\\n\\r\\n    const { status, body, description } = res.data\\r\\n\\r\\n    if (status === 200) {\\r\\n      // 登录成功\\r\\n      localStorage.setItem('hkzf_token', body.token)\\r\\n\\r\\n      /* \\r\\n        1 登录成功后，判断是否需要跳转到用户想要访问的页面（判断 props.location.state 是否有值）。\\r\\n        2 如果不需要（没有值），则直接调用 history.go(-1) 返回上一页。\\r\\n        3 如果需要，就跳转到 from.pathname 指定的页面（推荐使用 replace 方法模式，而不是 push）。\\r\\n      */\\r\\n      if (!props.location.state) {\\r\\n        // 此时，表示是直接进入到了该页面，直接调用 go(-1) 即可\\r\\n        props.history.go(-1)\\r\\n      } else {\\r\\n        // push：[home, login, map]\\r\\n        // replace: [home, map]\\r\\n        props.history.replace(props.location.state.from.pathname)\\r\\n      }\\r\\n      // 注意：无法在该方法中，通过 this 来获取到路由信息\\r\\n      // 所以，需要通过 第二个对象参数中获取到 props 来使用 props\\r\\n      // props.history.go(-1)\\r\\n    } else {\\r\\n      // 登录失败\\r\\n      Toast.info(description, 2, null, false)\\r\\n    }\\r\\n  }\\r\\n})(Login)\\r\\n\\r\\n// 注意：此处返回的是 高阶组件 包装后的组件\\r\\nexport default Login\\r\\n\"]}","code":"(window.webpackJsonp=window.webpackJsonp||[]).push([[19],{210:function(e,a,t){\"use strict\";t(211);var n=t(213),r=t.n(n),o=t(0),s=t.n(o),c=t(14),i=t(214),m=t.n(i);a.a=Object(c.f)(function(e){var a=e.children,t=e.history,n=e.onLeftClick,o=e.className,c=e.rightContent;return s.a.createElement(r.a,{className:[m.a.navBar,o||\"\"].join(\" \"),mode:\"light\",icon:s.a.createElement(\"i\",{className:\"iconfont icon-back\"}),onLeftClick:n||function(){return t.go(-1)},rightContent:c},a)})},214:function(e,a,t){e.exports={navBar:\"NavHeader_navBar__3a5BZ\"}},527:function(e,a,t){e.exports={root:\"Login_root__1AMB0\",navHeader:\"Login_navHeader__1D_lV\",backHome:\"Login_backHome__10ref\",formItem:\"Login_formItem__Mf5HJ\",input:\"Login_input__3h38e\",formSubmit:\"Login_formSubmit__25HhB\",submit:\"Login_submit__2PkzZ\",error:\"Login_error__5Xdzk\"}},595:function(e,a,t){\"use strict\";t.r(a);var n=t(9),r=t.n(n),o=(t(216),t(217)),s=t.n(o),c=t(20),i=(t(114),t(77)),m=t.n(i),l=(t(49),t(13)),u=t.n(l),p=(t(265),t(267)),d=t.n(p),f=t(36),_=t(37),b=t(39),h=t(38),v=t(40),g=t(0),E=t.n(g),k=t(32),w=t(591),N=t(399),j=t(41),L=t(210),y=t(527),H=t.n(y),O=function(e){function a(){return Object(f.a)(this,a),Object(b.a)(this,Object(h.a)(a).apply(this,arguments))}return Object(v.a)(a,e),Object(_.a)(a,[{key:\"render\",value:function(){return E.a.createElement(\"div\",{className:H.a.root},E.a.createElement(L.a,{className:H.a.navHeader},\"\\u8d26\\u53f7\\u767b\\u5f55\"),E.a.createElement(d.a,{size:\"xl\"}),E.a.createElement(m.a,null,E.a.createElement(w.c,null,E.a.createElement(\"div\",{className:H.a.formItem},E.a.createElement(w.b,{className:H.a.input,name:\"username\",placeholder:\"\\u8bf7\\u8f93\\u5165\\u8d26\\u53f7\"})),E.a.createElement(w.a,{className:H.a.error,name:\"username\",component:\"div\"}),E.a.createElement(\"div\",{className:H.a.formItem},E.a.createElement(w.b,{className:H.a.input,name:\"password\",type:\"password\",placeholder:\"\\u8bf7\\u8f93\\u5165\\u5bc6\\u7801\"})),E.a.createElement(w.a,{className:H.a.error,name:\"password\",component:\"div\"}),E.a.createElement(\"div\",{className:H.a.formSubmit},E.a.createElement(\"button\",{className:H.a.submit,type:\"submit\"},\"\\u767b \\u5f55\"))),E.a.createElement(u.a,{className:H.a.backHome},E.a.createElement(u.a.Item,null,E.a.createElement(k.b,{to:\"/registe\"},\"\\u8fd8\\u6ca1\\u6709\\u8d26\\u53f7\\uff0c\\u53bb\\u6ce8\\u518c~\")))))}}]),a}(g.Component);O=Object(w.d)({mapPropsToValues:function(){return{username:\"\",password:\"\"}},validationSchema:N.object().shape({username:N.string().required(\"\\u8d26\\u53f7\\u4e3a\\u5fc5\\u586b\\u9879\").matches(/^[a-zA-Z_\\d]{5,8}$/,\"\\u957f\\u5ea6\\u4e3a5\\u52308\\u4f4d\\uff0c\\u53ea\\u80fd\\u51fa\\u73b0\\u6570\\u5b57\\u3001\\u5b57\\u6bcd\\u3001\\u4e0b\\u5212\\u7ebf\"),password:N.string().required(\"\\u5bc6\\u7801\\u4e3a\\u5fc5\\u586b\\u9879\").matches(/^[a-zA-Z_\\d]{5,12}$/,\"\\u957f\\u5ea6\\u4e3a5\\u523012\\u4f4d\\uff0c\\u53ea\\u80fd\\u51fa\\u73b0\\u6570\\u5b57\\u3001\\u5b57\\u6bcd\\u3001\\u4e0b\\u5212\\u7ebf\")}),handleSubmit:function(){var e=Object(c.a)(r.a.mark(function e(a,t){var n,o,c,i,m,l,u,p;return r.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return n=t.props,o=a.username,c=a.password,e.next=4,j.a.post(\"/user/login\",{username:o,password:c});case 4:i=e.sent,m=i.data,l=m.status,u=m.body,p=m.description,200===l?(localStorage.setItem(\"hkzf_token\",u.token),n.location.state?n.history.replace(n.location.state.from.pathname):n.history.go(-1)):s.a.info(p,2,null,!1);case 7:case\"end\":return e.stop()}},e)}));return function(a,t){return e.apply(this,arguments)}}()})(O),a.default=O}}]);","extractedComments":[]}